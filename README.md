# Student Management API

A Flask-based REST API that manages student records using Supabase as the database backend. This API provides endpoints for creating, retrieving, and deleting student records.

## Prerequisites

- Python 3.x
- Flask
- Supabase account and project
- PostgreSQL database (provided by Supabase)

## Installation

1. Clone the repository:

```bash
git clone https://github.com/Unrealrojo234/supabaseSchoolDatabaseServer
cd supabaseSchoolDatabaseServer
```

2. Install required dependencies:

```bash
pip install flask flask-cors python-dotenv supabase
```

3. Create a `.env` file in the project root and add your Supabase credentials:

```env
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key
```

## Database Setup

Ensure you have a `students` table in your Supabase database with the following schema:

```sql
CREATE TABLE students (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL,
    age INTEGER NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()) NOT NULL
);
```

## API Endpoints

### Root Endpoint

- **URL**: `/`
- **Method**: `GET`
- **Description**: Returns a welcome message
- **Response**: HTML welcome message

### Get All Students

- **URL**: `/api/students`
- **Method**: `GET`
- **Description**: Retrieves all student records
- **Success Response**:
  ```json
  {
    "success": true,
    "data": [
      {
        "id": 1,
        "name": "John Doe",
        "age": 20,
        "created_at": "2025-01-06T..."
      }
    ],
    "count": 1
  }
  ```

### Create Student

- **URL**: `/api/students`
- **Method**: `POST`
- **Description**: Creates a new student record
- **Request Body**:
  ```json
  {
    "name": "John Doe",
    "age": 20
  }
  ```
- **Success Response** (201 Created):
  ```json
  {
    "success": true,
    "data": {
      "id": 1,
      "name": "John Doe",
      "age": 20,
      "created_at": "2025-01-06T..."
    },
    "message": "Student created successfully"
  }
  ```

### Delete Student

- **URL**: `/api/students/<student_id>`
- **Method**: `DELETE`
- **Description**: Deletes a student record by ID
- **URL Parameters**: `student_id` [integer]
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "Student with ID 1 deleted successfully",
    "deleted_record": {
      "id": 1,
      "name": "John Doe",
      "age": 20,
      "created_at": "2025-01-06T..."
    }
  }
  ```

## Error Handling

All endpoints include error handling that returns appropriate HTTP status codes and error messages:

- 400 Bad Request: Invalid input data
- 404 Not Found: Resource not found
- 500 Internal Server Error: Server-side errors

Error Response Format:

```json
{
  "success": false,
  "error": "Error message description"
}
```

## Running the Application

Start the Flask development server:

```bash
python app.py
```

The API will be available at `http://localhost:5000`

## Development

The application runs in debug mode by default when started directly (`app.run(debug=True)`). For production deployment, ensure to disable debug mode and use a production-grade WSGI server.

## CORS

Cross-Origin Resource Sharing (CORS) is enabled for all origins using Flask-CORS, making it suitable for development with frontend applications running on different domains or ports.

## Security Considerations

- Ensure to keep your `.env` file secure and never commit it to version control
- The Supabase key used should have appropriate permissions set
- Consider implementing authentication for production use
